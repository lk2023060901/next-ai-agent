{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/apps/web/middleware.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from 'next/server'\n\nconst PUBLIC_PATHS = [\n  '/login',\n  '/signup',\n  '/forgot-password',\n  '/reset-password',\n  '/verify-email',\n]\n\nconst AUTH_PATHS = ['/login', '/signup']\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl\n\n  // Skip static files and API routes\n  if (\n    pathname.startsWith('/_next') ||\n    pathname.startsWith('/api') ||\n    pathname.startsWith('/mockServiceWorker') ||\n    pathname.includes('.')\n  ) {\n    return NextResponse.next()\n  }\n\n  const token = request.cookies.get('access_token')?.value\n  const isPublic = PUBLIC_PATHS.some((p) => pathname.startsWith(p))\n  const isAuthPage = AUTH_PATHS.some((p) => pathname.startsWith(p))\n\n  // Redirect unauthenticated users to login\n  if (!token && !isPublic) {\n    const url = request.nextUrl.clone()\n    url.pathname = '/login'\n    url.searchParams.set('next', pathname)\n    return NextResponse.redirect(url)\n  }\n\n  // Redirect authenticated users away from auth pages\n  if (token && isAuthPage) {\n    const url = request.nextUrl.clone()\n    url.pathname = '/org/acme/ws/default/chat'\n    return NextResponse.redirect(url)\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: ['/((?!_next/static|_next/image|favicon.ico).*)'],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEA,MAAM,eAAe;IACnB;IACA;IACA;IACA;IACA;CACD;AAED,MAAM,aAAa;IAAC;IAAU;CAAU;AAEjC,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,mCAAmC;IACnC,IACE,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,WACpB,SAAS,UAAU,CAAC,yBACpB,SAAS,QAAQ,CAAC,MAClB;QACA,OAAO,kZAAY,CAAC,IAAI;IAC1B;IAEA,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,iBAAiB;IACnD,MAAM,WAAW,aAAa,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC;IAC9D,MAAM,aAAa,WAAW,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC;IAE9D,0CAA0C;IAC1C,IAAI,CAAC,SAAS,CAAC,UAAU;QACvB,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;QACjC,IAAI,QAAQ,GAAG;QACf,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ;QAC7B,OAAO,kZAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,oDAAoD;IACpD,IAAI,SAAS,YAAY;QACvB,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;QACjC,IAAI,QAAQ,GAAG;QACf,OAAO,kZAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO,kZAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAgD;AAC5D"}}]
}