# 工作区与团队管理

## 1 组织管理

### 1.1 创建组织

**入口**: 侧边栏组织选择器 → "创建新组织" 按钮

**Modal (md: 640px)**:

1. **组织名称**
   - Input, Placeholder "我的团队"
   - 验证: 2-50 字符

2. **组织标识 (Slug)**
   - Input, Placeholder "my-team"
   - 自动根据名称生成, 可修改
   - 验证: 3-30 字符, 小写字母/数字/连字符, 全局唯一
   - 实时去重检查

3. **组织规模**
   - Select: 个人 / 2-10人 / 11-50人 / 51-200人 / 200+

4. **行业**
   - Select: 互联网/软件 / 金融 / 教育 / 医疗 / 其他

5. **操作按钮**
   - "创建组织" (Primary, md) + "取消" (Ghost, md)

**创建成功**: Toast "组织创建成功", 自动切换到新组织, 跳转组织首页

### 1.2 组织设置页面

**路由**: `/org/[slug]/settings`

**左侧导航菜单**:
- 基本信息
- 成员管理
- 工作区
- 安全设置
- 计费与订阅
- 审计日志

#### 1.2.1 基本信息

- 组织头像: lg 尺寸 (64x64px), 上传同个人头像
- 组织名称: Input
- 组织标识: Input (disabled)
- 组织描述: Textarea (3 行, 最长 500 字)
- "保存" 按钮

- **危险区域** (红色边框卡片, 底部):
  - "转让所有权" 按钮 (Outline-Danger) → 二次确认 Modal (输入组织名确认)
  - "删除组织" 按钮 (Danger) → 二次确认 Modal (输入 "DELETE" 确认)

#### 1.2.2 成员管理

**顶部**: "邀请成员" 按钮 (Primary, md) + 搜索框 (宽度 300px)

**邀请 Modal (md: 640px)**:
- 邮箱输入 (支持多个, 逗号分隔, 每个显示为 Chip)
- 角色 Select: org_admin / ws_admin / ws_member
- 默认工作区 Select (可选)
- "发送邀请" 按钮

**成员列表 (表格)**:

| 列 | 宽度 | 内容 |
|-----|------|------|
| 成员 | 40% | 头像 (sm) + 名称 + 邮箱 (Caption, Text-Tertiary) |
| 角色 | 20% | Badge (角色名, 颜色按角色) |
| 加入时间 | 20% | Caption, 相对时间 |
| 操作 | 20% | "更改角色" 下拉 + "移除" (Danger Ghost) |

- 操作列对当前用户自身: 显示 "(你)" 标记, 禁用移除
- 分页: 每页 20 人

#### 1.2.3 审计日志

**筛选器** (水平排列, 间距 space-3):
- 时间范围: DateRangePicker
- 操作者: Select (成员列表)
- 操作类型: Select (登录/设置变更/成员变动/Agent操作/等)

**日志列表** (表格):

| 列 | 宽度 | 内容 |
|-----|------|------|
| 时间 | 20% | Caption, 精确到秒 |
| 操作者 | 20% | 头像 (xs) + 名称 |
| 操作 | 40% | Body-sm, 如 "修改了工作区设置" |
| IP | 20% | Caption, Code 字体 |

---

## 2 工作区管理

### 2.1 工作区列表页

**路由**: `/org/[slug]/workspaces`

**布局**: 3 列卡片网格, 间距 space-6

**每个工作区卡片**:
```
┌─────────────────────────────────┐
│ [图标 40x40] [space-3]          │
│ 工作区名称 (H4)                  │
│ 描述文字 (Body-sm, 2行截断)       │
│                                  │
│ ┌────────┐  ┌────────┐         │
│ │ 3 Agent│  │ 12 会话 │         │
│ └────────┘  └────────┘         │
│ (Caption, 水平排列, 间距 space-4) │
│                                  │
│ 成员头像组 (最多5个, 重叠, 多余+N) │
├─────────────────────────────────┤
│ 最近活跃: 2分钟前  (Caption)      │
└─────────────────────────────────┘
```

- 卡片尺寸: 等宽分列
- 内边距: space-5
- 圆角: radius-lg
- hover: shadow-md + translateY(-2px)
- 点击: 进入工作区

**右上角**: "新建工作区" 按钮 (Primary, md)

### 2.2 创建工作区

**Modal (md: 640px)**:

1. **工作区图标**
   - 预设图标选择器 (4x4 网格, 16 个 emoji/图标)
   - 或自定义上传 (64x64px)

2. **工作区名称**
   - Input, Placeholder "产品开发"

3. **工作区描述**
   - Textarea, 2 行, Placeholder "描述这个工作区的用途..."

4. **可见性**
   - Radio Group:
     - "组织可见" — 组织所有成员可见
     - "私有" — 仅邀请的成员可见

5. **初始成员**
   - 成员搜索 + 多选 Chip

6. **Agent 模板**
   - Select: 空白 / 软件开发团队 / 内容创作团队 / 客户支持团队
   - 选择模板后下方展示包含的 Agent 列表预览

### 2.3 工作区首页

**路由**: `/org/[slug]/ws/[workspace-slug]`

**布局**: 2x2 卡片网格 (上) + 最近活动 (下)

#### 2.3.1 概览卡片 (2x2 网格)

每个卡片内边距 space-5, 圆角 radius-lg, 背景 Surface:

**卡片 1 — 活跃 Agent**
- 左上: 图标 (Bot, 24px, Primary-300)
- 右上: 数字 (H2, Text-Primary)
- 下方: "活跃 Agent" (Body-sm, Text-Secondary)
- 底部: 迷你折线图 (24h 趋势, 高 40px, Primary-300)

**卡片 2 — 今日会话**
- 图标: MessageCircle
- 数字 + "今日会话"
- 迷你柱状图

**卡片 3 — Token 用量**
- 图标: Zap
- 数字 (千为单位, 如 "12.5K") + "今日 Token"
- 用量占比环形图 (已用/配额)

**卡片 4 — 活跃任务**
- 图标: ListChecks
- 数字 + "进行中任务"
- 进度条 (完成/总计)

#### 2.3.2 最近活动

- 时间线布局 (左侧时间轴线 2px, Primary-100)
- 每条活动:
  ```
  ● [头像 xs] [用户名 Body-sm 600] [动作 Body-sm] [目标 Body-sm Primary-500]
    [时间 Caption Text-Tertiary]
  ```
- 圆点色: 按操作类型 (创建=Success, 修改=Primary, 删除=Danger)
- 最多显示 20 条, "查看全部" 链接

### 2.4 工作区设置

**路由**: `/org/[slug]/ws/[workspace-slug]/settings`

**Tabs**: 基本信息 | 成员 | Agent 配置 | 渠道 | 插件 | 危险操作

#### 2.4.1 Agent 配置 Tab

- Agent 卡片列表 (2 列, 间距 space-4)
- 每个 Agent 卡片:
  ```
  ┌───────────────────────────────────────────┐
  │ [角色色圆点 12px] [Agent 名称 H4]          │
  │ [角色描述 Body-sm Text-Secondary 2行]      │
  │                                            │
  │ 模型: Claude Opus 4.6    [Badge Primary]   │
  │ 工具: 浏览器, 代码执行     [Badge×N]        │
  │                                            │
  │ [编辑] [禁用] [删除]                        │
  │ (Ghost sm 按钮组, 右对齐)                   │
  └───────────────────────────────────────────┘
  ```

- "添加 Agent" 按钮 → 打开 Agent 配置抽屉 (Drawer, 从右滑出, 宽度 480px)

#### 2.4.2 渠道 Tab

- 渠道列表 (每行一个渠道):
  ```
  ┌──────────────────────────────────────────────────────┐
  │ [渠道图标 32px] [渠道名 H4] [状态Badge]               │
  │ [连接信息 Body-sm Text-Secondary]                     │
  │                                          [配置] [断开] │
  └──────────────────────────────────────────────────────┘
  ```

- 状态 Badge:
  - 已连接: Success "在线"
  - 断开: Danger "离线"
  - 配置中: Warning "配置中"

---

## 3 组织切换器

**位置**: 侧边栏顶部

**外观**:
```
┌────────────────────────────────┐
│ [组织头像 32px] [组织名 Body 600] │
│                  [ChevronDown]  │
└────────────────────────────────┘
```

**点击展开 Dropdown** (宽度 240px, shadow-lg):
- 搜索框 (sm, Placeholder "搜索组织...")
- 组织列表 (每项: 头像 sm + 名称 + 角色 Badge)
- 当前组织: 右侧 Check 图标
- 分割线
- "创建新组织" 按钮 (Ghost, 左侧 Plus 图标)
